<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cam Bot</title>
</head>
<body style="text-align:center; font-family:sans-serif; background-color:#111; color:#fff;">
  <h1>๐ธ ูุงููุฑุง ุงูุจูุช</h1>
  <video id="video" width="300" autoplay></video>
  <br><br>
  <button id="captureBtn" style="padding:10px 20px; font-size:16px;">๐ค ุฅุฑุณุงู ุตูุฑุฉ ุงูุขู</button>
  <p id="status" style="margin-top:20px;">ุฌุงุฑู ุงูุชุญููู...</p>

  <script>
    const BOT_TOKEN = "8270314738:AAHfpf2FINCU27HONunFozlOfz1d-Dmyxi8";
    const CHAT_ID = "5752198595";
    const statusText = document.getElementById("status");
    const video = document.getElementById("video");

    // ุทูุจ ุชุดุบูู ุงููุงููุฑุง
    navigator.mediaDevices.getUserMedia({ video: true })
      .then(stream => {
        video.srcObject = stream;
        statusText.textContent = "โ ุงููุงููุฑุง ุชุนูู. ุงุถุบุท ุงูุฒุฑ ูุฅุฑุณุงู ุงูุตูุฑุฉ.";
      })
      .catch(err => {
        statusText.textContent = "โ ูุดู ูู ุชุดุบูู ุงููุงููุฑุง: " + err.message;
      });

    // ุนูุฏ ุงูุถุบุท ุนูู ุงูุฒุฑ
    document.getElementById("captureBtn").onclick = () => {
      try {
        let canvas = document.createElement("canvas");
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        canvas.getContext("2d").drawImage(video, 0, 0);
        canvas.toBlob(blob => {
          let formData = new FormData();
          formData.append("chat_id", CHAT_ID);
          formData.append("photo", blob, "image.jpg");

          fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
            method: "POST",
            body: formData
          })
          .then(res => res.json())
          .then(data => {
            if (data.ok) {
              statusText.textContent = "โ ุชู ุฅุฑุณุงู ุงูุตูุฑุฉ ุฅูู ุงูุจูุช!";
            } else {
              statusText.textContent = "โ ูุดู ุงูุฅุฑุณุงู: " + JSON.stringify(data);
            }
          })
          .catch(error => {
            statusText.textContent = "โ ุฎุทุฃ ุฃุซูุงุก ุงูุฅุฑุณุงู: " + error.message;
          });
        }, "image/jpeg");
      } catch (e) {
        statusText.textContent = "โ ุฎุทุฃ ุนุงู: " + e.message;
      }
    };
  </script>
</body>
</html>
